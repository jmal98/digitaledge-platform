version: '3.3'

services:
  master:
    image: jmal98/digitaledge-master.tms.local.deleidos.com:${CUR_REL:-latest}
    networks:
      tms:
        aliases:
          - master.tms.local.deleidos.com
    cap_add:
      - NET_ADMIN
    volumes:
       - master_rdafs:/mnt/rdafs
    ports:
     - "0:8443"
     - "0:443"

  auth:
    image: jmal98/digitaledge-auth.tms.local.deleidos.com:${CUR_REL:-latest}
    depends_on:
      - master
    networks:
      tms:
        aliases:
          - auth.tms.local.deleidos.com   
    cap_add:
      - NET_ADMIN
    volumes:
       - auth_rdafs:/mnt/rdafs
    ports:
     - "0:8443"
     - "0:443"

  api:
    image: jmal98/digitaledge-api.tms.local.deleidos.com:${CUR_REL:-latest}
    depends_on:
      - master
      - auth
    networks:
      tms:
        aliases:
          - api.tms.local.deleidos.com
    cap_add:
      - NET_ADMIN
    ports:
     - "0:8443"

  default:
    image: jmal98/digitaledge-default.tms.local.deleidos.com:${CUR_REL:-latest}
    depends_on:
      - master
      - auth
      - api
    cap_add:
      - NET_ADMIN
    networks:
      tms:
        aliases:
          - default.tms.local.deleidos.com
    ports:
     - "0:8443"
     - "0:443"
 
 

networks:
  tms:   
         
volumes:
  master_rdafs:
  
  auth_rdafs:
